# FluxForge Configuration Example
# Copy this file to config.yaml and fill in your credentials

# IMPORTANT: Never commit config.yaml with real credentials to version control!
# Add config.yaml to your .gitignore

# Coinbase Advanced Trade API
coinbase:
  api_key: "organizations/xxx/apiKeys/xxx"
  api_secret: "-----BEGIN EC PRIVATE KEY-----\nYOUR_PRIVATE_KEY_HERE\n-----END EC PRIVATE KEY-----\n"
  product_ids:
    - "BTC-USD"
    - "ETH-USD"
    - "SOL-USD"
  channels:
    - "ticker"
    - "level2"
    - "market_trades"
  ws_url: "wss://advanced-trade-ws.coinbase.com"
  level2_batch_size: 10  # Max products per level2 subscription (Coinbase limit)

# Databento API (for equities/ETFs/options)
databento:
  api_key: "your-databento-api-key-here"
  dataset: "XNAS.ITCH"  # or GLBX.MDP3, etc.
  symbols:
    - "AAPL"
    - "MSFT"
    - "TSLA"
  schema: "trades"  # or mbp-1, mbp-10, mbo, etc.

# Interactive Brokers
ibkr:
  gateway_url: "https://localhost:5000"
  account_id: "your-account-id"
  contracts: []

# Ingestion Layer Settings
ingestion:
  output_dir: "./data/raw"
  batch_size: 100
  flush_interval_seconds: 5.0
  queue_maxsize: 10000
  enable_fsync: true
  auto_reconnect: true
  max_reconnect_attempts: 10
  reconnect_delay: 5.0
  segment_max_mb: 100  # Max segment size in MB before rotation

# ETL Layer Settings
etl:
  input_dir: "./data/raw/ready/coinbase"  # Read from ready/, not active/
  output_dir: "./data/processed"
  compression: "snappy"
  schedule_cron: null  # Optional: "0 * * * *" for hourly
  delete_after_processing: true  # Delete raw segments after successful ETL
  processing_dir: "./data/raw/processing"  # Temp dir during ETL
  
  # Channel-specific ETL configuration
  channels:
    level2:
      partition_cols:
        - "product_id"
        - "date"
      processor_options:
        reconstruct_lob: false  # Enable for LOB reconstruction (memory intensive)
        compute_features: false  # Enable for microstructure features
        add_derived_fields: true  # Add timestamp partitions, mid-price, spread
    
    market_trades:
      partition_cols:
        - "product_id"
        - "date"
      processor_options:
        add_derived_fields: true  # Add timestamp partitions, value, side_normalized
        infer_aggressor: false  # Enable for aggressor inference (requires LOB)
    
    ticker:
      partition_cols:
        - "product_id"
        - "date"
      processor_options:
        add_derived_fields: true  # Add timestamp partitions, mid-price, spread, ranges

# Logging
log_level: "INFO"
log_format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
